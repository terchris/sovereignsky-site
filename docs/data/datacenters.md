# Datacenters Data

Cloud providers and datacenter operators with their physical locations.

## Files

### Source Files (individual providers)

- `dco-*.json` - Datacenter operators (colocation)
- `hyp-*.json` - Hyperscalers (AWS, Azure, GCP, etc.)
- `reg-*.json` - Regional cloud providers
- `rc-*.json` - Regional colocation providers

### Generated Files

- `providers.json` - Merged array of all providers (generated by merge script)

### Related

- `../schemas/datacenters.schema.json` - JSON Schema (TODO: create)

## Data Model

```
┌─────────────────┐
│    Provider     │
│  (dco-*.json)   │
└────────┬────────┘
         │ regions[]
         ▼
┌─────────────────┐         ┌─────────────────┐
│     Region      │────────►│    Countries    │
│  (locations)    │ country │  (regions.json) │
└─────────────────┘   _id   └─────────────────┘
```

## Schema: Source Files (dco-*.json, hyp-*.json, etc.)

```json
{
  "provider_id": "bahnhof",
  "provider_name": "Bahnhof",
  "provider_type": "datacenter_operator",
  "updated": "2025-12-20",
  "vendor_country_id": "SE",
  "vendor_website": "https://bahnhof.se",
  "regions": [
    {
      "region_id": "pionen",
      "region_name": "Pionen (Stockholm)",
      "country_id": "SE",
      "city": "Stockholm",
      "coordinates": [59.3145, 18.0850]
    }
  ],
  "meta": {
    "source": "https://example.com/datacenter-list"
  }
}
```

### Provider Fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `provider_id` | string | ✓ | Unique identifier (slug) |
| `provider_name` | string | ✓ | Display name |
| `provider_type` | string | ✓ | `hyperscaler`, `datacenter_operator`, `regional_cloud`, `regional_colocation` |
| `updated` | string | | ISO date `YYYY-MM-DD` when data was last verified |
| `vendor_country_id` | string | ✓ | ISO country code of vendor HQ |
| `vendor_website` | string | | Provider website URL |
| `regions` | array | ✓ | List of datacenter locations |
| `meta` | object | | Optional metadata (source URLs, notes) |

### Region Fields

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `region_id` | string | ✓ | Provider's region identifier |
| `region_name` | string | ✓ | Display name for region |
| `country_id` | string | ✓ | ISO country code where physically located |
| `city` | string | | City or area name |
| `coordinates` | array | | `[latitude, longitude]` |

## Schema: providers.json (merged)

Array of provider objects at root level. Hugo accesses as `site.Data.datacenters.providers`.

```json
[
  {
    "provider_id": "aws",
    "provider_name": "Amazon Web Services",
    "provider_type": "hyperscaler",
    "updated": "2025-12-19",
    "vendor_country_id": "US",
    "vendor_website": "https://aws.amazon.com",
    "regions": [...]
  }
]
```

## Generator Scripts

### Merge Providers

`scripts/merge-datacenters.js`

- Reads all `*.json` files from `data/datacenters/` (except `providers.json`)
- Creates `data/datacenters/providers.json` (merged array)

```bash
node scripts/merge-datacenters.js
```

### Generate Provider Pages

`scripts/generate-datacenters-pages.js`

- Reads `data/datacenters/providers.json`
- Creates `content/datacenters/{provider_id}/index.md` for each provider

```bash
node scripts/generate-datacenters-pages.js
```

### Generate Country Pages

`scripts/generate-datacenters-country-pages.js`

- Reads `data/datacenters/providers.json` + `data/regions.json`
- Creates `content/datacenters/{country}/index.md` for each country with datacenters

```bash
node scripts/generate-datacenters-country-pages.js
```

## Usage in Templates

```go
{{ $providers := site.Data.datacenters.providers }}

{{ range $providers }}
  {{ .provider_name }} ({{ .vendor_country_id }})
  {{ range .regions }}
    - {{ .region_name }} in {{ .country_id }}
  {{ end }}
{{ end }}
```

## Related Data

| Data | Relationship |
|------|--------------|
| Regions | `vendor_country_id` and `country_id` link to `data/regions.json` |
| Jurisdictions | Risk levels from `data/jurisdictions.json` |

## Content Pages

Generated pages:
- `/datacenters/` - List of all providers
- `/datacenters/{provider_id}/` - Provider detail with map and locations
- `/datacenters/{country}/` - All providers with locations in that country

## TODO

- [ ] Create `data/schemas/datacenters.schema.json`
- [ ] Standardize field names to match site-wide conventions (`provider_id` → `identifier`, etc.)
