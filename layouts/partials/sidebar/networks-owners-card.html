{{/*
  networks-owners-card.html - Shows network connection owners

  Expects context with:
    - connection: The network connection data
    - actorById: Lookup dict for actors
    - countriesById: Lookup dict for countries (for flags)
*/}}

{{ $connection := .connection }}
{{ $actorById := .actorById }}
{{ $countriesById := .countriesById }}

{{ if $connection }}
{{ with $connection.ownerActorIds }}
<div class="card bg-base-100 shadow-sm border border-base-300">
  <div class="card-body p-4">
    <h3 class="card-title text-sm font-semibold flex items-center gap-2">
      {{ partial "icon.html" (dict "name" "building" "color" "secondary" "size" "4") }}
      Owners
    </h3>
    <ul class="mt-2 space-y-1">
      {{ range . }}
        {{ $actor := index $actorById . }}
        {{ $flag := "" }}
        {{ if $actor }}
          {{ $countryId := $actor.countryId | default "" }}
          {{ if $countryId }}
            {{ $region := index $countriesById $countryId }}
            {{ if $region }}{{ $flag = $region.flag }}{{ end }}
          {{ end }}
        {{ end }}
        <li class="text-sm flex items-center gap-2">
          {{ if $flag }}<span>{{ $flag }}</span>{{ end }}
          <span>{{ if $actor }}{{ $actor.name }}{{ else }}{{ . }}{{ end }}</span>
        </li>
      {{ end }}
    </ul>
  </div>
</div>
{{ end }}
{{ end }}
