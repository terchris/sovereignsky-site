{{ define "main" }}
<article class="max-w-full">
  {{/* Section Header */}}
  {{ partial "section-header.html" (dict
      "title" .Title
      "description" .Description
      "icon" "globe"
  ) }}

  {{/* Section Stats */}}
  {{ $networks := index site.Data "networks" "networks" }}
  {{ $total := len $networks }}
  {{ $subsea := 0 }}
  {{ $terrestrial := 0 }}
  {{ $active := 0 }}
  {{ range $networks }}
    {{ if eq .medium "subsea" }}{{ $subsea = add $subsea 1 }}{{ end }}
    {{ if eq .medium "terrestrial" }}{{ $terrestrial = add $terrestrial 1 }}{{ end }}
    {{ if eq .status "active" }}{{ $active = add $active 1 }}{{ end }}
  {{ end }}

  <div class="stats stats-vertical lg:stats-horizontal shadow-lg w-full bg-base-100 mb-8">
    <div class="stat">
      <div class="stat-figure text-primary">
        {{ partial "content-icon.html" (dict "name" "globe" "color" "primary" "size" "8") }}
      </div>
      <div class="stat-title">Total Connections</div>
      <div class="stat-value text-primary">{{ $total }}</div>
      <div class="stat-desc">Mapped networks</div>
    </div>
    <div class="stat">
      <div class="stat-figure text-info">
        {{ partial "content-icon.html" (dict "name" "bolt" "color" "info" "size" "8") }}
      </div>
      <div class="stat-title">Submarine Cables</div>
      <div class="stat-value text-info">{{ $subsea }}</div>
      <div class="stat-desc">Undersea routes</div>
    </div>
    <div class="stat">
      <div class="stat-figure text-secondary">
        {{ partial "content-icon.html" (dict "name" "location" "color" "secondary" "size" "8") }}
      </div>
      <div class="stat-title">Land Connections</div>
      <div class="stat-value text-secondary">{{ $terrestrial }}</div>
      <div class="stat-desc">Terrestrial routes</div>
    </div>
    <div class="stat">
      <div class="stat-figure text-success">
        {{ partial "content-icon.html" (dict "name" "check-circle" "color" "success" "size" "8") }}
      </div>
      <div class="stat-title">Active</div>
      <div class="stat-value text-success">{{ $active }}</div>
      <div class="stat-desc">Operational now</div>
    </div>
  </div>

  {{/* Section Content - render markdown content which includes map and data tables */}}
  <section class="max-w-full mt-6 prose dark:prose-invert prose-table:w-full prose-img:max-w-full [&>*]:max-w-none">
    {{ .Content }}
  </section>
</article>
{{ end }}
